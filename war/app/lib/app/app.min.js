/* Share10 App v1.0.0 22-04-2016 */
App={},App.MainApp=function(){var a;this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".form-group",value:"margin-bottom:15px"}]},{name:"@media (max-width: 480px)",items:[{name:".form-group",value:"margin-bottom:8px"}]}]};var b={items:[{name:"loading",ac:"App.Loading"},{html:"div",style:"width:100%;z-index:500;position:fixed;",items:[{name:"appBanner",lc:"App.AppBannerS",config:{imageUrl:"app/res/img/share10.png"},items:[{name:"home-action",ac:"App.Button",ilist:"home",tlist:"frontPage",cmd:"view",label:"Home"},{name:"login-action",ac:"App.Button",ilist:"login",tlist:"frontPage",cmd:"view",label:"Sign In"}]},{name:"ltoolBar",lc:"App.LToolBar"}]},{name:"pages",items:[{name:"home",lc:"App.Home",config:{hidden:!0}},{name:"login",lc:"App.Login",config:{hidden:!0}}]},{html:"div","class":"container",style:"padding-left:0px; padding-right:0px;padding-top:95px;",items:[{name:"frontPage",stylex:""},{name:"midPage",stylex:""},{name:"backPage",stylex:""},{name:"lastPage",stylex:""}]}]};SA.setAppConfig({appName:"Share10app",hostName:"http://localhost:8888"}),$(document).on("click","a",function(a){if(a.target.target&&a.target.target.length>0&&SA.utils.isMobileDevice()){console.debug("intercept click"),a.preventDefault();var b=SA.lookupComponent("login");b&&b.closeDialogs();var c=SA.createComponent("ttf-frame","App.LinkFrame"),d=c.createUI("",{srcUrl:a.target.href}),e=SA.lookupComponent("appBanner");e.showNextPage(a.target.innerText,"link-page",d,!0,!0)}}),this.createUI=function(){a=this.compId;var c=SA.createUI(this.compId,b);return SA.fireEvent("ltoolBar",{cmd:"checkResetUrl"}),c},this.postLoad=function(){}},App.main=new App.MainApp;var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("page",this.onDeviceReady,!1)},onDeviceReady:function(){app.receivedEvent("page")},receivedEvent:function(){}};app.initialize(),App.Home=function(){function a(){var a="App.CardPanel",b="";App.util.isMobileApp()||(b='<p><b>NOTE: The mobile app "Share10" is available for <a href="https://itunes.apple.com/us/app/share10/id1053770041?mt=8">download here.</a></b></p>');var c={lc:a,config:{title:'<b>"Share 10"</b> is an app for sharing lists of up to ten important things to you in any category. <b>"Share 10" is also called S10.</b>'+b,titleStyle:"color:#808080;margin-bottom:10px;font-size:140%",desc:"",id:100,editMode:!1},items:[{lc:"App.Card",config:{id:-1,listId:100,ttitle:"",stitle:"",imageUrl:"app/res/img/share10-pic.jpg",info:" "}},{lc:"App.Card",config:{id:-1,listId:100,ttitle:"Some examples..",stitle:"Best shaved ice places, favorite lunch spots, top bargains, worse world leaders, best soccer videos, list of interview questions, etc.. <br><br>It is really whatever you want it to be! ",imageUrl:"",info:" "}},{lc:"App.Card",config:{id:-1,listId:100,ttitle:"Share your list with anyone you like!",stitle:"",info:""}},{lc:"App.Card",config:{id:-1,listId:100,ttitle:"Think high quality content!",stitle:"",info:""}},{lc:"App.Card",style:"background-color:#A8A8A8;color:#F9F9F9",config:{id:-1,listId:100,ttitle:"<b>About This App</b>",info:"  ",stitle:'<br>"Share 10" is an example of a "Universal Application" that is made to work on many popular mobile devices and browsers.<p>This entire app is developed with the Simpler Apps Framework <a href="http://simpler-apps.com" target="_blank">(simpler-apps.com)</a>. It is constructed with about 20 components called Adaptive Web Components (AMCs).<p style="font-size:80%;color:#E0E0E0;font-family:monospace;">Copyright (c) 2015-2016 HQ APPS Consulting. All rights reserved.</p><a href="app/res/text/EULA.html" target="_blank">End User License Agreement</a>'}}]};return c}function b(){var a=(new Date).getTime(),b=a-f>600;return f=a,b}this.flow={items:[{html:"div",id:"lists-content"},{name:"listDialogs",lc:"App.ListDialogs"},{name:"itemsDialogs",lc:"App.ItemsDialogs"},{name:"shareDialogs",lc:"App.ShareDialogs"},{name:"feedbackDialogs",lc:"App.Feedback"}]};var c=void 0,d=void 0,e=void 0;this.createUI=function(a,b){d=this,e=this.compId;var c=SA.listCreateUI(this.compId,this.flow,b,!0);return c+=SA.createHtmlEnd(this.flow)},this.handleEvent=function(e){if("refresh"==e.cmd)1==e.clearShare&&(c.share=void 0),d.handleEvent(c);else if("showAll"==e.cmd){if(!b(e))return void App.util.stopWorking();c=e;var f={name:"listsPage",lc:"App.ListsPage_1",config:{},items:[]},g=e.data;if(g)f.items=g,f.demoList=a();else{var h=a();f.items.push(h),f.config.introMode=!0}e.share&&(f.shareList=e.share.list);var i=SA.createUI(this.compId,f,null,!0);$("#lists-content").html(i);var j=SA.lookupComponent("listsPage");j.setListener(this),App.util.stopWorking()}else if("refreshList"==e.cmd){var k=e.data,l=SA.lookupComponent("listsPage");l.resetPage(k,e.tileId,e.deleted)}else if("show"==e.cmd){var m=e.idx,l=SA.lookupComponent("listsPage");l.showPage(m)}},this.addNewList=function(a){var b=SA.lookupComponent("listsPage");b.addList(a.id,a)},this.deleteList=function(a){var b=SA.lookupComponent("listsPage");b.delList(a.id)},this.postLoad=function(){};var f=0},App.Login=function(){function a(a,b,c){var d="";return d+=SA.listCreateUI(this.compId,b,c,!0)}function b(a,b){var c=a.indexOf(" "),d=a;return 1==b?c>0&&(d=a.substring(0,c)):(d="",c>0&&(d=a.substring(c))),d=d.trim(),d.length>0?d[0].toUpperCase()+d.substr(1):d}function c(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?(g(a,d,!1),!1):c.crPassword&&c.crPassword.length<6?(g(a,"Password too short, minimum 6 characters!",!1),!1):($("#"+a).html(""),ret=!0,!0)}function d(a,b){k=SA.getCompByIdOrName(j),k&&k.showDialog(!1),j=a,k=SA.getCompByIdOrName(j),k&&(b&&0!=b.length||(b=""),k.updateForm({lgMsg:"",lgEmail:b,fgEmail:b,lgPassword:""}),k.showDialog(!0))}function e(){k.setWaiting(!1),k.showDialog(!1)}function f(a){var b=jQuery.parseJSON(a);"OK"==b.status?(g(l,"Successful",!0),SA.setUserAuth(b),SA.setAppData("userName",b.respData.email),SA.fireEvent("appBanner",{cmd:"postLogin"}),k&&k.showDialog(!1)):("USERNAME_EXISTS"==b.error?g(l,"Username already exists!",!1):g(l,"Authentication failure!",!1),k.setWaiting(!1))}function g(a,b,c){var d=SA.comps.getCompByName(a);d.showMessage(b,c),c||h()}function h(){for(var a=k.compId,b=$("#"+a),c=25,d=0;4>d;d++)$(b).animate({"margin-left":"+="+(c=-c)+"px"},50)}this.css={items:[]};var i=void 0,j="login-dlg",k=void 0,l=void 0;this.flow={items:[{name:"login-dlg",lc:"App.Dialog",items:[{name:"login-form",lc:"App.FormHandler",config:{title:"Please Sign In",listener:this},items:[{name:"lgMsg",ac:"App.Message"},{html:"div",style:"height:12px;"},{name:"lgEmail",ac:"App.TextField",info:"Email address",required:!0,pattern:"email"},{name:"lgPassword",ac:"App.TextField",info:"Password",required:!0,pattern:"text",config:{type:"password"}},{html:"div",style:"height:10px;"},{cmd:"cmdLogin",ac:"App.Button",label:"Sign In",config:{theme:"color"}},{cmd:"cmdCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:25px;"},{cmd:"cmdShowCreate",ac:"App.Button",label:"Create new account",config:{type:"link"},style:"float:left;font-size:110%;margin-bottom:10px;"},{cmd:"cmdShowForgot",ac:"App.Button",label:"Forgot password?",config:{type:"link"},style:"float:right;font-size:110%;margin-bottom:10px;"}]}]},{name:"forgot-pass-dlg",label:"Forgot My Password",lc:"App.Dialog",items:[{name:"forgot-pass-form",lc:"App.FormHandler",config:{title:"I Forgot my Password",listener:this},items:[{name:"fgMsg",ac:"App.Message"},{html:"div",style:"height:15px;"},{html:"p",value:"Enter your registered email address, and we will email you a reset password link:"},{name:"fgEmail",ac:"App.TextField",info:"Email address",required:!0,pattern:"email"},{html:"div",style:"height:10px;"},{cmd:"cmdEmailPass",ac:"App.Button",label:"Send"},{cmd:"cmdCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:25px;"}]}]},{name:"create-acct-dlg",label:"Create New Account",lc:"App.Dialog",items:[{name:"create-acct-form",lc:"App.FormHandler",config:{title:"Create New Account",listener:this},items:[{name:"crMsg",ac:"App.Message"},{name:"crMsg",html:"span","class":"errmsg",value:""},{html:"div",style:"height:12px;"},{name:"crName",ac:"App.TextField",info:"Name: First Last ",required:!0,pattern:"text"},{name:"crEmail",ac:"App.TextField",info:"Email address",required:!0,pattern:"email"},{name:"crPassword",ac:"App.TextField",info:"Password",config:{type:"password"},required:!0,pattern:"text"},{html:"div",style:"height:10px;"},{html:"div",style:"font-size:90%;",value:'By clicking "Create Account" below, you agree to <a href="app/res/text/EULA.html" target="_blank">HQ APPS Consulting User Agreement</a>'},{html:"div",style:"height:10px;"},{cmd:"cmdCreateAcct",ac:"App.Button",label:"Create Account"},{cmd:"cmdCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:12px;"},{cmd:"cmdShowLogin",ac:"App.Button",label:"I already have an account",style:"font-size:120%",config:{type:"link"}},{html:"div",style:"height:12px;"}]}]}]},this.createUI=function(b,c){if(SA.getUserAuth())return SA.deleteUserAuth(),SA.events.fireEvent("appBanner",{cmd:"postLogin"}),"";i=this.compId,j="login-dlg",k=void 0;var e=a(i,this.flow,c),f=SA.getAppData("userName");return d(j,f),e},this.closeDialogs=function(){k&&k.showDialog(!1)},this.notifySubmit=function(a,g,h){if("cmdShowCreate"==a.cmd)d("create-acct-dlg");else if("cmdShowForgot"==a.cmd){var i=SA.getAppData("userName");d("forgot-pass-dlg",i)}else if("cmdShowLogin"==a.cmd)d("login-dlg");else if("cmdCancel"==a.cmd)k.showDialog(!1);else if("cmdLogin"==a.cmd){if(l="lgMsg",c("lgMsg",g,h)){var j={};j.email=h.lgEmail,j.authToken=h.lgPassword,k.setWaiting(!0),SA.server.get("/rs/user",j,f)}}else if("cmdCreateAcct"==a.cmd){if(l="crMsg",c("crMsg",g,h)){var j={};j.firstName=b(h.crName,!0),j.lastName=b(h.crName,!1),j.email=h.crEmail,j.authToken=h.crPassword,k.setWaiting(!0),SA.server.set("/rs/user",j,f)}}else if("cmdEmailPass"==a.cmd&&(l="fgMsg",c("fgMsg",g,h))){var j={};j.msg="EMAIL-ME-RESET-PASSWORD",j.userId=h.fgEmail,k.setWaiting(!0),SA.server.set("/rs/feedback",j,e)}},this.successLogin=function(a){f(a)}},App.util=function(){this.openUrlInWindow=function(a){window.open(a,"_system")},this.isImageUrl=function(a){return a.indexOf("/media/")>0},this.pickListCover=function(a){var b={};if(a.items&&a.items.length>0){for(i=0;i<a.items.length;i++)if(a.items[i].mediaUrl){b.mediaUrl=a.items[i].mediaUrl;break}for(i=0;i<a.items.length;i++)if(a.items[i].mediaId){b.mediaId=a.items[i].mediaId;break}}else b.mediaId=a.mediaId,b.mediaUrl=a.mediaUrl;return b.mediaId&&(b.imageUrl=SA.server.getMediaUrl(b.mediaId)),b},this.getYouTubeHtml=function(a){var b=a.lastIndexOf("=");0>b&&(b=a.lastIndexOf("/"));var c=a.substring(b+1),d="350";$(window).width()<500&&(d="250");var e='<iframe width="100%" height="'+d+'" src="https://www.youtube.com/embed/'+c+'" frameborder="0" allowfullscreen></iframe>';return e},this.getFriendlyTime=function(a){var b=(new Date).getTime(),c=(b-a)/1e3;return 60>c?Math.round(c)+" seconds ago":3600>c?Math.round(c/60)+" minutes ago":86400>c?Math.round(c/3600)+" hours ago":604800>c?Math.round(c/86400)+" days ago":Math.round(c/604800)+" weeks ago"},this.getMyNameInfo=function(){var a=SA.getUserAuth(),b="";if(a&&(a=a.respData,a.firstName&&(b+=a.firstName,a.lastName&&(b+=" "+a.lastName)),b.length<3)){var c=a.email.indexOf("@");c>0&&(b=a.email.stubstring(0,c))}return b},this.isMobileApp=function(){var a=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");return a?!0:!1},this.safeHtml=function(a){var b=void 0;return a&&(b=a.replace(/<\/?[^>]+(>|$)/g,"")),b},this.startWorking=function(){var a=SA.lookupComponent("loading");a.start()},this.stopWorking=function(){var a=SA.lookupComponent("loading");a.stop()}},App.util=new App.util,App.AppBannerS=function(){function a(){var a=e(E),b=z+"-left",c='<div id="'+m+'" class="'+r+'" >'+a+"</div>",d='<div id="about-us" class="'+w+'" >About</div>';logoButton='<div id="'+b+'" ><img src="'+o+'" class="'+q+'" /></div>';var f='<div class="row" ><div class="col-md-8 col-md-offset-2" ><div id="toolbar" class="" ><div id="logo" class="'+t+'" ><a id="'+l+'" + class="" href="#" >'+logoButton+"</a></div>"+c+d+"</div></div></div>";return f}function b(){var a=(e(E),A+"-title"),b=A+"-left",c='<div id="'+a+'" class="'+u+'"></div>',d='<img id="'+b+'" src="'+p+'" class="'+v+'" />',f='<div class="row" ><div class="col-md-8 col-md-offset-2" ><div id="toolbar" class="" ><div id="logo" class="'+t+'" ><a id="'+l+'" + class="" href="#" >'+d+"</a></div>"+c+"</div></div></div>";return f}function c(a){if(a){var b=a;if(a.length>40){var c=a.lastIndexOf(" ");c>0&&(a=a.substring(0,c)),b=a+" .."}var d=$(window).width(),e=9*b.length,f=d/2-e/2,g=$("#"+A+"-left").offset().left;g-=5,0>g&&(g=0),f-=g;var h=$("#"+A+"-title");h.css("margin-left",f+4),h.html(b)}}function d(){C>0?($("#"+z).hide(),$("#"+A).show()):($("#"+z).show(),$("#"+A).hide())}function e(){var a=SA.getAtomComponent(E.name,E.ac),b=a.createUI(E,null);return b}function f(a,b,c){var d=$(window).width();if(!h(d))return c&&b.html(""),b.hide(),void a.fadeIn("fast");var e=d+"px";b.css("width",d+"px"),a.show(),b.animate({left:e},"fast",function(){c&&b.html("")})}function g(a,b){var c=$(window).width();if(!h(c))return a.hide(),b.fadeIn("fast"),void j(0);var d=10*C;b.css({"z-index":d});var e=80;b.css("position","fixed"),b.css("overflow-y","scroll"),b.css("-webkit-overflow-scrolling","touch"),b.css("top","0px"),b.css("padding-top",e+"px"),b.css("height","100%");var f=c;b.css("left",f+"px"),b.css("width",c+"px"),b.show(),a.hide(),b.animate({left:"0px"},"fast",function(){})}function h(a){return 500>a&&App.util.isMobileApp()}function j(a){SA.utils.isMobileDevice()?window.scrollTo(0,a):$("html, body").animate({scrollTop:a,scrollLeft:0},0)}this.stateful=!0,this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".banner",value:"height:70px;padding-left:10px;"},{name:".logo",value:"float:left;"},{name:".login",value:"color:#C8C8C8;font-size:110%;padding-left:20px;padding-right:2px;padding-top:32px;float:right;cursor:pointer;"},{name:".about",value:"color:silver;font-size:110%;padding-left:20px;padding-right:2px;padding-top:32px;float:right;cursor:pointer;"},{name:".title",value:"color:#D0D0D0;font-size:150%;padding-left:0px;padding-top:25px;"},{name:".brand",value:"float:left;padding-top:20px;padding-left:0px;padding-bottom:10px;width:120px;"},{name:".back",value:"float:left;padding-top:20px;padding-left:0px;padding-bottom:10px;width:60px;"}]},{name:"@media (max-width: 480px)",items:[{name:".banner",value:"height:70px;padding-left:5px;"},{name:".logo",value:"float:left;"},{name:".login",value:"color:#C8C8C8;padding-top:39px;padding-left:0px;padding-right:0px;padding-bottom:0px;float:right;cursor:pointer;"},{name:".about",value:"color:silver;padding-top:39px;padding-left:0px;padding-right:15px;padding-bottom:0px;float:right;cursor:pointer;"},{name:".title",value:"color:#D0D0D0;font-size:115%;padding-left:0px;padding-top:30px;"},{name:".brand",value:"float:left;padding-left:4px;padding-top:28px;width:110px;padding-bottom:0px"},{name:".back",value:"float:left;padding-top:25px;padding-left:12px;padding-bottom:10px;width:50px;"}]}]};var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=!1,C=0,D=[{name:"frontPage",ypos:0,tbshown:!0},{name:"midPage",ypos:0,tbshown:!0},{name:"backPage",ypos:0,tbshown:!0},{name:"lastPage",ypos:0,tbshown:!0}],E={name:"",ac:"App.LoginComp",config:{label:"Sign In",loggedIn:!1}};this.createUI=function(c){if(o=SA.getConfigValue(c,"imageUrl")){if(p="app/res/img/backicon-wt.png",y=this.id,n=this,r=SA.localCss(this,"login"),s=SA.localCss(this,"banner"),t=SA.localCss(this,"logo"),u=SA.localCss(this,"title"),q=SA.localCss(this,"brand"),v=SA.localCss(this,"back"),olayCss=SA.localCss(this,"overlay"),w=SA.localCss(this,"about"),x=SA.localCss(this,"reload"),actionsList=c.items,actionsList.length<2)return void alert("Need at least 2 action atoms for AppBanner to load ");if(l=actionsList[0].name,m=actionsList[1].name,k={},k[l]=actionsList[0],k[m]=actionsList[1],actionsList[1].label){var d=actionsList[1].label;E.config.label=d}E.name=m,z="home-"+y,A="back-"+y;var e='<div style="background-color:rgba(77, 128, 102, 0.95);"><div id="'+y+'" class="container '+s+'"><div id="'+z+'">'+a()+'</div><div id="'+A+'">'+b()+"</div></div></div>";return e}},this.showAbout=function(a){a?$("#about-us").show():$("#about-us").hide()},this.handleEvent=function(a){if("postLogin"==a.cmd){var b=e(E);$("#"+E.name).html(b),SA.fireEvent("ltoolBar",{cmd:"login"}),n.showAbout(SA.getUserAuth()?!0:!1)}},this.resetContent=function(a,b){for(i=0;i<D.length;i++)if(a==D[i].dataId){var c=$("#"+D[i].name);c.html(b)}},this.showPrevious=function(){$("#"+A+"-left").click()},this.loadPage=function(a,b){var c=SA.getList(a.ilist),d=SA.getList(a.tlist),e=SA.listCreateUI(this.compId,c);if(b){var f=$("#"+d.name),g=$(window).width();h(g)&&(f.css("position","fixed"),f.css("overflow-y","scroll"),f.css("-webkit-overflow-scrolling","touch"),f.css("height","100%"),f.css("top","0px"),f.css("padding-top","80px"),f.css("width","100%")),f.html(e),f.show()}};var F=0;this.showNextPage=function(a,b,e,f){if(F!=b){if(C==D.length-2){var h=b.toString();if(h.indexOf("-")<=0)return}C++,F=b;var i=SA.lookupComponent("ltoolBar");D[C].title=a,D[C].dataId=b,D[C-1].tbshown=i.isVisible();var j=$("#"+D[C-1].name),k=$("#"+D[C].name);D[C].ypos=$(window).scrollTop(),k.hide(),k.html(e),g(j,k),d();var l=void 0!=f?!f:void 0,m=SA.lookupComponent("ltoolBar");m.setEditMode(l),m.renderView(C),c(a)}},this.postLoad=function(){d(),$("#"+A+"-left").click(function(){if(0!=C){F=0,C--,d();var a=D[C].tbshown;if(a){var b=SA.lookupComponent("ltoolBar");0==C&&b.setEditMode(!0),b.show(!0),b.renderView(C)}c(D[C].title);var e=$("#"+D[C].name),g=$("#"+D[C+1].name),h=!0;f(e,g,h);var i=D[C+1].ypos;j(i)}}),$("#about-us").click(function(){var a=SA.lookupComponent("listsPage"),b=a.demoPageHtml();n.showNextPage("About Us   ","about-us",b,!0,!0);var c=SA.lookupComponent("ltoolBar");c.show(!1)}),$("#"+m).click(function(){n.loadPage(k[m],!1)}),B||(n.loadPage(k[l],!0),B=!0)}},App.BtnCircle=function(){this.stateful=!1;var a=new App.Button,b=void 0;this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".round",value:"display:block;width:15px;height:15px;border: 1px solid #f5f5f5;border-radius: 50%;box-shadow: 0 0 1px gray;float:left;"},{name:".round:hover",value:"background: #F0F0F0;"},{name:".selected",value:"background: #F0F0F0;"}]},{name:"@media (max-width: 480px)",items:[{name:".round",value:"display:block;width:10px;height:10px;border: 1px solid #f5f5f5;border-radius: 50%;background: #ffffff;box-shadow: 0 0 1px gray;float:left;"},{name:".round:hover",value:"background: #262626;"},{name:".selected",value:"background: #F0F0F0;"}]}]},this.createUI=function(a){var c=a.label;c||(c="none"),b=this.compId,a.name&&(b=a.name);var d=SA.localCss(this,"round"),e=SA.localCss(this,"round:hover"),f='<a id="'+b+'" href="#" class=" btnCircle '+d+" "+e+'"></a>';return f},this.getName=function(){return a.getName()},this.setActionListener=function(b){a.setActionListener(b)},this.select=function(a,b){var c=SA.localCss(this,"selected"),d=$("#"+b),e=d.hasClass(c);a?e||d.addClass(c):e&&d.removeClass(c)},this.triggerEvent=function(b){a.triggerEvent(b)},this.postLoad=function(){a.postLoad()}},App.Button=function(){this.stateful=!1,this.actionListener=void 0,this.selected=!1;var a=void 0,b=void 0,c=void 0;this.css={},this.createUI=function(d){a=d;var e=SA.getConfig(d,"glyphicon"),f=SA.getConfig(d,"type","button"),g="link"==f,h=SA.getConfig(d,"theme","color"),i="blank"==h?"btn-default":"btn-success";b||(b=SA.getConfig(d,"listener"));var j=SA.getConfig(d,"defButton",!1);j=!0;var k=d.label;k||(k="No Label");var l="";d.info&&(l='title="'+d.info+'"');var m="";d.style&&(m=d.style);var n="";e&&(n="glyphicon "+e),c=this.compId,d.name&&(c=d.name);var o="";if(g)m=""==m?"float:left;padding:8px;padding-left:0px":m,o='<div style=""'+l+'><a id="'+c+'" href="#" style="'+m+'">'+k+"</a></div>";else{m=""==m?"margin-right:8px;":m;var p=c+"-span";o=j?'<button id="'+c+'" '+l+' style="'+m+'" class="btn '+i+'"><span id="'+p+'" class="'+n+'"></span> '+k+"</button>":'<div id="'+c+'" '+l+' style="'+m+'" class="btn '+i+'"><span id="'+p+'" class="'+n+'"></span> '+k+"</div>"}return o},this.setWaiting=function(a){a?$("#"+c+"-span").addClass("glyphicon glyphicon-refresh glyphicon-refresh-animate"):$("#"+c+"-span").removeClass("glyphicon glyphicon-refresh glyphicon-refresh-animate")},this.getName=function(){return this.atomObj.name},this.setActionListener=function(a){b=a},this.showSelected=function(a){this.selected=a;var b=this.id;a?$("#"+b).addClass("active"):$("#"+b).removeClass("active")},this.triggerEvent=function(a){var b=this.id,c=$("#"+b);c&&c.trigger(a)};var d=0;this.postLoad=function(){{var c=this.id,e=(this.compId,this);$("#"+c)}$("body").on("click","#"+c,function(f){if(f.preventDefault(),!(f.timeStamp-d<4)){if(d=f.timeStamp,a.tlist&&0==a.tlist.indexOf("#compId:"))return void SA.events.fireEvent(a.tlist.substring(8),"click");var g=c;if(b&&b.performAction(g,a,e),a.tlist){var h=SA.comps.getList(a.ilist),i=SA.comps.getList(a.tlist),j="";if(i.lc){h&&(i.items||(i.items=new Array),i.items.push(h));var j=SA.listCreateUI(g,i);j&&tdiv.html(j)}else j=SA.listCreateUI(this.compId,h),j&&$("#"+i.name).html(j)}}})}},App.Card=function(){function a(a){var b=new Date,c=b.getTime();return 2592e5>c-a}function b(a,b,c,e,f){var g={lc:"App.Comments",config:{zoomMode:a,listId:b,itemId:c,maxComm:e,cardCompId:f},data:[]},h=SA.createUI(d,g);return h}function c(a,b,c){var d=SA.lookupComponent("itemsDialogs");return d?d.getItemsToolBar(a,b,c):void 0}this.stateful=!0,this.actionListener=void 0;var d=void 0,e=void 0,f=void 0,g=!1,h=void 0,i=void 0,j=void 0;this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".card",value:"margin-bottom:40px; border: 1px solid #E0E0E0;padding:10px;background-color:#fff"},{name:".title",value:"font-size:160%;margin-top:4px;margin-bottom:4px;"},{name:".parag",value:"font-size:120%;margin-top:4px;margin-bottom:6px;"}]},{name:"@media (max-width: 480px)",items:[{name:".card",value:"margin-bottom:18px; border: 1px solid #E0E0E0;padding:5px;background-color:#fff"},{name:".title",value:"font-size:130%;margin-bottom:2px;"},{name:".parag",value:"font-size:100%;margin-top:4px;margin-bottom:4px;"}]}]},this.createUI=function(j,k){var l=SA.localCss(this,"card"),m=SA.localCss(this,"title"),n=SA.localCss(this,"parag");i=SA.getConfig(j,"listener");var o=SA.getConfig(j,"editMode",!0),p=(SA.getConfig(j,"zoomMode",!1),SA.getConfig(j,"nshare",!1)),q=SA.getConfig(j,"maxComm",0),r=j.style;h=j,d=this.compId,f="com-"+d,e=d+"-tb";var s="";if(k.dummy){g=!0;var t=c(d,h,!0);s+='<div id="'+d+'" class=""><div><div style="float:left;margin-bottom:30px;" id="'+e+'">'+t+"</div></div></div>"}else{var t="",u="";r&&(u=' style="'+r+'"');var v="";j.user&&(v='<div oid="'+d+'" style="padding-top:5px;padding-bottom:25px;"><div style="float:left;color:gray;">By: '+j.user+"</div></div>");var w="";if(k.timeMs&&k.timeMs>0){var x=App.util.getFriendlyTime(k.timeMs);w=a(k.timeMs)?'<p style="font-size:80%;margin-top:0px;color:#4D97B1"><b>Modified: '+x+"</b></p>":'<p style="font-size:80%;margin-top:0px;color:gray" >Modified: '+x+"</p>"}if(s+='<div id="'+d+'"'+u+' class="'+l+'" >',o&&(s+='<div><div style="float:right;" id="'+e+'">'+t+"</div></div>"),v?(k.ttitle&&(s+='<p style="margin-bottom:0px;" class="'+m+'" >'+k.ttitle+"</p>",s+=w),s+=v):k.ttitle&&(s+='<p class="'+m+'" >'+k.ttitle+"</p>",s+=w),k.stitle&&(s+='<p class="'+n+'" >'+k.stitle+"</p>"),k.mediaUrl?s+=App.util.getYouTubeHtml(k.mediaUrl):k.imageUrl&&(s+='<img width="100%" class="img-responsive" style="margin-bottom:10px" src="'+k.imageUrl+'"></a>'),k.info&&(s+="<p>"+k.info+"</p>"),k.lname&&k.link&&(s+='<p><a href="'+k.link+'" target="ttfaves-link">'+k.lname+"</a></p>"),1!=p&&h.config.listId&&h.config.id>0){var y=b(!1,h.config.listId,h.config.id,q,d);s+='<div id="'+f+'" >'+y+"</div>"}s+="</div>"}return s},this.redrawComments=function(a,b){$("#com-"+a).html(b)},this.commentsUpdated=function(a){console.debug("comm updated"),j=a},this.postLoad=function(){function a(a){var c=a.timeStamp-b>500;return b=a.timeStamp,c}var b=(new Date).getTime();$("#"+e).show(),$("#"+f).on("tap",function(b){if(a(b));}),$("#"+d).on("tap",function(b){if(a(b)){i&&i.actionPerformed&&i.actionPerformed(h)}}),$("#"+d).on("swiperight",function(b){if(a(b)){var c=SA.lookupComponent("appBanner");c.showPrevious()}})}},App.CardPanel=function(){function a(){return""}this.stateful=!0,this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".title",value:"color:#606060;margin-top:10px;margin-bottom:0px;font-size:250%"}]},{name:"@media (max-width: 480px)",items:[{name:".title",value:"color:#606060;margin-top:5px;margin-bottom:0px;font-size:180%"}]},{name:".share-bt",value:"float:right;color:#A0A0A0;background-color:#F8F8F8;font-size:80%;padding:8px;"}]};var b=void 0,c=void 0,d=void 0,e=void 0;this.createUI=function(f,g){var h=this.compId;d=h+"rmShare",e=h+"flShare";var i=SA.getConfig(f,"addTile"),j=SA.getConfig(f,"height"),k=SA.getConfig(f,"titleStyle",""),l="";if(j&&(l="height:"+j),b=g.id,!f.items)return void 0;var m=f.items;1==i&&f.items.length<10&&f.items.push({lc:"App.Card",config:{dummy:!0,listId:b}});var n=SA.localCss(this,"title"),o=SA.localCss(this,"share-bt");c=SA.getConfigValue(f,"title","");var p=SA.getConfigValue(f,"desc"," "),q=SA.getConfigValue(f,"editMode",!0),r=a(),s="";if(f.user){var t=SA.getUserAuth();s='<div oid="'+h+'" style="padding-top:5px;padding-bottom:5px;"><div style="float:left;color:gray;padding-bottom:5px;">By: '+f.user+"</div>",t&&(s+='<div id="'+d+'" class="'+o+'">Delete</div><div id="'+e+'" class="'+o+'">Complain</div>'),s+="</div>"}var u='<div class="container-fluid" style="padding-top:5px;padding-right:6px;padding-left:6px;background-color:#F0F0F0;'+l+'" >'+r+'<div class="row" ><div class="container col-md-8 col-md-offset-2" ><div style="margin-bottom:20px"><p  class="'+n+'" style="'+k+'" >'+c+'</p><p style="margin-bottom:5px">'+p+"</p>"+s+'</div></div></div><div class="row"><div class="container col-md-8 col-md-offset-2" ><div >',v=0;for(v=0;v<m.length;v++){var w=m[v];if(w.ac){var x=SA.getAtomComponent(w.name,w.ac),y=x.createUI(w,null);u+=y}else w.config.editMode=q,u+=SA.listCreateUI(w.compId,w,void 0,!0)}return u+="</div></div></div></div>"},this.postLoad=function(){$("#"+d).on("tap",function(){var a=SA.lookupComponent("listDialogs");a.deleteSharedList(b)}),$("#"+e).on("tap",function(){var a=SA.lookupComponent("feedbackDialogs");a.showFeedbackDlg(b)})}},App.Comments=function(){function a(a,b){var d=a;b&&b.length>0&&(d=b.length);var e="";d&&d>0&&(e=d+" Comments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");var f="add-"+l,g="sum-"+l,h='<div id="'+f+'" class="'+t+'"><div id="'+g+'" >'+c(a,b)+"</div></div>",i='<div id="'+l+'">'+h+"</div>";return i}function b(){var a='<div id="'+o+'"  ></div>';return k(!1,o,!0),a}function c(a,b){var c=a;b&&b.length>0&&(c=b.length);var d="";c&&c>0&&(d=c+" Comments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");var e=d+"Add Comment";return e}function d(b,c,d){var e=a(c,d),f="#sum-"+b;$(f).html(e)}function e(){}function f(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?!1:!0}function g(a,b){var c=SA.lookupComponent(b);return c&&c.showDialog(!0,a,"appBanner"),c}function h(){var a=SA.lookupComponent("newcomm-dlg");a.showDialog(!1,"Comments","appBanner")}function j(a){var b="<div>";for(i=0;i<a.length;i++){var c=a[i],d='<div style="float:left;font-size:95%;width:100%;margin-bottom:10px;background-color:#f8f8f8;" ><div style="float:left;width:14%;padding-right:8px;"><img class="img-responsive" src="app/res/img/unknown.png" /></div><div style="float:left;width:80%;"><b>'+c.commentor+"</b> .. "+c.comment+'<br><div style="color:#66A3C2">'+App.util.getFriendlyTime(c.timeMs)+"</div></div></div>";b+=d}return b+="</div>"}function k(a,b){function c(a){var c=jQuery.parseJSON(a);f.comments=c.respData;var d=j(f.comments);$("#"+b).html(d)}var d=r.itemId,e=r.listId,f=s.findCard(e,d),h=l,i="";f.comDivId=h,f.comments&&f.comments.length>0?i=j(f.comments):f.maxComm&&f.maxComm>0&&(i="Loading comments ..",SA.server.get("/rs/comment",{listId:e,itemId:d},c));var k={itemId:d,listId:e,card:f,prevComments:i},m=SA.lookupComponent("newcomm-form");m.updateForm(k),1==a&&g("","newcomm-dlg")}this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".title",value:"font-size:100%;width:100%;background-color:#F8F8F8;padding-top:5px;padding-bottom:5px;"}]},{name:"@media (max-width: 480px)",items:[{name:".title",value:"font-size:95%;width:100%;background-color:#F8F8F8;"}]}]},this.flow={items:[{name:"newcomm-dlg",lc:"App.Dialog",items:[{name:"newcomm-form",lc:"App.FormHandler",config:{title:"Comments",listener:this},items:[{name:"itemId",ac:"App.Variable"},{name:"listId",ac:"App.Variable"},{name:"card",ac:"App.Variable"},{name:"maxComm",ac:"App.Variable"},{name:"prevComments",html:"p",style:"font-size:95%",value:""},{name:"commText",ac:"App.TextArea",info:"Your comment",required:!0,pattern:"text",config:{rows:2}},{html:"div",style:"height:2px;"},{cmd:"cmdPostComm",ac:"App.Button",label:"Post",config:{theme:"color",defButton:!0}},{cmd:"cmdCancelComm",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:8px;"}]}]}]};var l,m,n,o,p,q,r,s,t;this.createUI=function(c){l=this.compId,m=this,n="add-"+l,o="rep-"+l,r=c.config,s=SA.lookupComponent("ltoolBar"),t=SA.localCss(m,"title");var d=SA.getConfig(c,"zoomMode"),e=SA.getConfig(c,"maxComm",0);p=SA.getConfig(c,"cardCompId");var f="";1==d?f=b():(SA.listCreateUI(l,this.flow),f=a(e,c.data));var g='<div id="'+l+'">'+f+"</div>";return g},this.performAction=function(a){q&&q.actionPerformed&&q.actionPerformed({cmd:a})},this.notifySubmit=function(a,b,c){if("cmdPostComm"==a.cmd&&f("commMsg",b,c)){var g=new FormData,i=c.card,j=App.util.getMyNameInfo();if(g.append("comment",App.util.safeHtml(c.commText)),g.append("listId",i.listId),g.append("itemId",i.id),g.append("commentor",j),c.id)SA.server.putForm("/rs/ttitem",g,e);else{var k=1;i.maxComm&&(k=i.maxComm+1),i.maxComm=k,g.append("maxComm",k),i.comments||(i.comments=[]);var l=(new Date).getTime(),m={comment:c.commText,commentor:j,timeMs:l};i.comments.push(m),d(i.comDivId,k,void 0),SA.server.postForm("/rs/comment",g,e)}}h()},this.postLoad=function(){$("#"+n).on("tap",function(){k(!0,"prevComments",!1)})}},App.Dialog=function(){function a(){if(!f){var a=e.items[0].name;f=SA.comps.getCompByIdOrName(a)}return f}this.stateful=!0,this.htmlTempl=void 0;$(window).width();this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".dlg",value:"width:520px;position:absolute; top:6%;left:45%;margin-top:-30px;margin-left:-200px;padding:20px;"}]},{name:"@media (max-width: 480px)",items:[{name:".dlg",value:"width:100%;position:absolute; top:6%;margin-top:-30px;padding:10px;margin-left:0px"}]}]};var b=void 0,c=void 0,d=void 0,e=void 0,f=void 0;this.createUI=function(a){var f=SA.getConfigValue(a,"pageStyle",!1),g=SA.utils.isMobileDevice();if(g=!0,d=f&&g,b)return"";b=this.compId,c=b+"-page",e=a;var h=a.label;h||(h="No title provided in label field");var i="";a.items&&a.items.length>0&&(i=SA.listCreateUI(this.compId,a.items[0],{pageStyle:d}));{var j=SA.localCss(this,"dlg"),k='<div class="modal fade" id="'+b+'" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true"><div class="modal-dialog '+j+'" ><div id="'+c+'" class="modal-content"><div class="modal-body" style="height:100%;width:100%;" >'+i+"</div></div></div></div>";$("#page")}return $("#page").append("<div id='"+a.name+"'></div>"),void $("#"+a.name).html(k)},this.setWaiting=function(b){var c=a();c&&c.setWaiting(b)},this.showDialog=function(a,e,f,g){if(d){var h=SA.lookupComponent(f);a?h.showNextPage(e,c,$("#"+c).html(),void 0,g):h.showPrevious()}else $("#"+b).modal(a?{show:a}:"hide")},this.updateForm=function(b){var c=a();c&&c.updateForm(b)},this.showElement=function(b,c){var d=a();
d&&d.showElement(b,c)},this.postLoad=function(){}},App.EnumField=function(){function a(a){return a+"-"+d}function b(a){for(i=0;i<e.length;i++)if(e[i]!=a){var b=$("#"+e[i]);b.hasClass("active")&&b.removeClass("active")}}this.stateful=!0,this.actionListener=void 0,this.atomObj=void 0;var c="",d=void 0,e=new Array,f=void 0;this.css={items:[]},this.createUI=function(b){this.atomObj=b,d=this.compId;var g="",h=(SA.getConfigValue(b,"type","text"),"");b.info&&(g='placeholder="'+b.info+'"'),b.label&&(h='<label class="col-md-3 control-label" for="email">'+b.label+"</label>");var j=b.values;j&&0!=j.length||alert("Invalid State: expected 'values' array with name value objects"),c=b.value,c||(c=""),f=a("clkgrp");var k='<div id="'+d+'" class="form-group" ><div class="col-md-12"><div class="btn-group">';for(i=0;i<j.length;i++){var l=j[i],m=l.name==c||l.value==c?"active":"";m+=" "+f;var n=a(l.name);e.push(n),k+='<button type="button" class="btn btn-default '+m+'" id="'+n+'">'+l.value+"</button>"}return k+="</div></div></div>"},this.getValue=function(){return c},this.getName=function(){return this.atomObj.name},this.postLoad=function(){$("."+f).click(function(){c=$(this).attr("id"),$(this).addClass("active"),b(c)})}},App.Feedback=function(){function a(){g()}function b(a){var b=jQuery.parseJSON(a);"OK"==b.status?(h(),SA.deleteUserAuth(),SA.setAppData("userName",""),window.location.href="/"):e("lgrMsg","Reset failed, can be caused by invalid or expired reset URL!",!1),l.setWaiting(!1)}function c(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?(e(a,"Message cannot be empty!",!1),!1):!0}function d(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?(e(a,d,!1),!1):c.lgrPassword1!=c.lgrPassword2?(e(a,"Passwords do not match!",!1),!1):c.lgrPassword1.length<6?(e(a,"Password too short, minimum 6 characters!",!1),!1):!0}function e(a,b,c){var d=SA.lookupComponent(a);d.showMessage(b,c)}function f(a,b){return l=SA.lookupComponent(a),l&&(b&&l.updateForm(b),l.showDialog(!0)),l}function g(){l.setWaiting(!1),l.showDialog(!1)}function h(){l.setWaiting(!1),l.showDialog(!1)}this.css={items:[]};var i,j,k,l,m={items:[{name:"feedback-dlg",lc:"App.Dialog",items:[{name:"feedback-form",lc:"App.FormHandler",config:{title:"Complain About List Content",listener:this},items:[{name:"relItemId",ac:"App.Variable"},{name:"feedMsg",ac:"App.Message"},{html:"div",style:"height:12px;"},{name:"feedText",ac:"App.TextArea",info:"Tell us your complaint message",required:!0,pattern:"text",config:{rows:3}},{html:"div",style:"height:10px;"},{cmd:"cmdPostFeed",ac:"App.Button",label:"Send Complaint",config:{theme:"color",defButton:!0}},{cmd:"cmdCancelFeed",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:15px;"}]}]},{name:"password-reset-dlg",lc:"App.Dialog",items:[{name:"password-reset-form",lc:"App.FormHandler",config:{title:"Reset Your Password",listener:this},items:[{name:"lgrMsg",ac:"App.Message"},{html:"div",style:"height:12px;"},{name:"passToken",ac:"App.Variable"},{name:"lgrPassword1",ac:"App.TextField",info:"New Password",required:!0,pattern:"text",config:{type:"password"}},{name:"lgrPassword2",ac:"App.TextField",info:"Re-type New Password",required:!0,pattern:"text",config:{type:"password"}},{html:"div",style:"height:10px;"},{cmd:"cmdResetLogin",ac:"App.Button",label:"Save Password",config:{theme:"color"}},{cmd:"cmdResetCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:25px;"}]}]}]},n=!1;this.createUI=function(){i=this.compId,j=this},this.showFeedbackDlg=function(a){n||(SA.createUI(i,m),n=!0),k=a,f("feedback-dlg",{})},this.showResetDialog=function(a){n||(SA.createUI(i,m),n=!0),f("password-reset-dlg",{passToken:a})},this.performAction=function(a){listener&&listener.actionPerformed&&listener.actionPerformed({cmd:a})},this.handleEvent=function(a){"passwordReset"==a.cmd&&(j.showResetDialog(a.data),App.util.stopWorking())},this.notifySubmit=function(e,f,i){if("cmdPostFeed"==e.cmd){if(c("feedMsg",f,i)){var j=new FormData;j.append("msg",App.util.safeHtml(i.feedText)),j.append("relItemId",k),l.setWaiting(!0),SA.server.postForm("/rs/feedback",j,a)}}else if("cmdResetLogin"==e.cmd){if(d("lgrMsg",f,i)){var m={};m.email=i.passToken,m.authToken=i.lgrPassword1,m.resetPassword="true",l.setWaiting(!0),SA.server.set("/rs/user",m,b)}}else"cmdCancelFeed"==e.cmd?g():"cmdResetCancel"==e.cmd&&h()}},App.FormHandler=function(){function a(a){l=new Array;{var b=a.items;this.compId}h=SA.getConfigValue(a,"title","Form Title Goes Here");var c="";j||(c='<div class="panel-heading" style="border-bottom:0px;"><p class="'+f+'" >'+h+"</p></div>");var d='<div class="panel panel-default" style="margin-bottom:0px;border-width:0px;background-color:transparent;">'+c+'<div style="padding-top:10px" /><div class="row"><div class="col-md-12"><div><form class="form-horizontal" action="" method="post">',e=0;for(e=0;e<b.length;e++){var i=b[e];if(i.ac){var k=SA.getAtomComponent(i.name,i.ac);l.push(k),k.setActionListener&&k.setActionListener(g);var m=k.createUI(i,null);d+=m}else d+=SA.listCreateUI(i.compId,i,void 0,!0)}return d+="</form></div></div></div></div>"}this.stateful=!0;var b,c,d,e,f,g,h,j,k,l=new Array;this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".header",value:"padding:0px;font-size:135%;margin:0 0 0 0;"},{name:".form",value:"width:90%;padding:15px;font-size:110%;"}]},{name:"@media (max-width: 480px)",items:[{name:".header",value:"padding:0px;font-size:130%;margin:0 0 0 0;"},{name:".form",value:"width:98%;padding-top:12px;padding-bottom:5px;font-size:85%;"}]}]},this.createUI=function(h){if(d=h,g=this,b=SA.getConfigValue(h,"listener"),h.items){c=this.compId,h.name&&(c=h.name),e=SA.localCss(this,"form"),f=SA.localCss(this,"header"),j=SA.getConfigValue(h,"pageStyle",!1);var i;return i=j?'<div id="'+c+'" class="container col-md-8 col-md-offset-2" >'+a(h)+"</div>":'<div id="'+c+'" class="container '+e+'" >'+a(h)+"</div>"}},this.updateForm=function(b){SA.utils.mergeList(d,b);var e=a(d);$("#"+c).html(e)},this.showElement=function(a,b){b?$("#"+a).show():$("#"+a).hide()},this.addFormListener=function(a){b=a},this.setWaiting=function(a){k&&k.setWaiting&&k.setWaiting(a),a?$("#"+c).find(":input").prop("disabled",!0):$("#"+c).find(":input").prop("disabled",!1)},this.performAction=function(a,c,e){if(b&&b.notifySubmit){k=e;var f=this.getFormData(l);b.notifySubmit(c,d.items,f)}},this.getFormData=function(a){var b={};for(i=0;i<a.length;i++){var c=a[i];if(c.getName&&c.getValue){var d=c.getName(),e=c.getValue();e&&""!=e&&(b[d]=e)}}return b},this.postLoad=function(){}},App.HSlider=function(){this.stateful=!0;var a,b,c,d;this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".my-gallery",value:"margin-left:0px;margin-right:0px;"}]},{name:"@media (max-width: 480px)",items:[{name:".my-gallery",value:"margin-left:0px;margin-right:0px;"}]}]},this.createUI=function(e){a=this.compId,b=SA.localCss(this,"my-gallery");var f='<div id="'+a+'" class="'+b+'">';if(c=0,e.items){for(j=0;j<e.items.length;j++){var g=e.items[j],h=SA.listCreateUI(this.compId,g);d="page-"+g.config.id,f+='<div id="'+d+'" >'+h+"</div>"}c=e.items.length}return f+="</div>"},this.addPage=function(a,d){var e='<div id="page-'+a+'" >'+d+"</html>",f=$("."+b);f.slick("slickAdd",e),f.slick("slickGoTo",c),c++},this.delPage=function(a){var b=$("#page-"+a);b.remove(),c--},this.resetPage=function(a,b){$("#page-"+a).html(b)},this.nextPage=function(){$("#"+a).carousel("next")},this.prevPage=function(){$("#"+a).carousel("prev")},this.showPage=function(a){(0>a||a>=c)&&(a=c-1)},this.setListener=function(a){listener=a},this.postLoad=function(){$("."+b).slick({infinite:!1,touchThreshold:5,arrows:!1,mobileFirst:!0,respondTo:"min"});var a=-1;$("."+b).on("afterChange",function(b,c){var d=c.currentSlide;listener&&listener.slideEvent&&d!=a&&(listener.slideEvent(d),a=d)})}},App.ImagesPanel=function(){function a(a){var b=$(window).width(),c=$(window).height(),d=b-b/2+70,e=c/2-40,f=(b-d)/2,g="position:absolute;top:"+e+"px;left:"+f+"px;z-index:20;width:"+d+"px",h='<div style="'+g+'" >'+a+"</div>";$("#"+i).html(h)}function b(a){var b=($(window).width(),$(window).height()),c=b-90,d="position:absolute;top:"+c+"px;left:20px;z-index:20;width:90%",e='<div style="'+d+'" >'+a+"</div>";$("#"+j).html(e)}function c(){m>=l.length&&(m=0);var a=$(window).width(),b=a+200,c='<img  id="'+g+'" src="app/res/img/'+l[m]+'" style="float:left;width:'+b+'px;"  />';return m++,c}function d(){function a(){console.log("timer handler invoked ");var a=$("#"+h);a.css({position:"absolute"}),a.animate({top:"-100px"},8e3),a.animate({left:"-200px"},8e3,function(){a.fadeOut("fast",function(){var b=c();a.html(b).fadeIn("fast",function(){}),a.css({position:"absolute"}),a.css({top:"0px"}),a.css({left:"0px"})})})}setTimeout(a,1e3)}function e(){function c(){console.debug("text timer handler"),a('<div style="color:white;font-weight:bold;font-size:130%;">Ten (or less) most important things to you in any category!</div><div style="color:white;font-size:130%;">Think high quality! Share it with your friends.</div>');var c='<div style="color:#F0F0F0;font-size:90%;"><b>Share 10</b> is an example of a "Universal Application" developed with the <a href="http://simpler-apps.com" target="_blank">Simpler Apps Framework</a>. <p style="font-size:80%;color:#C8C8C8;font-family:monospace">Copyright (c) 2015 HQ APPS Consulting. All rights reserved.</p></div>';b(c)}setTimeout(c,1e3)}this.flow={items:[]};var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=!0,l=["share10-pic.jpg","IMG_2835.jpg"],m=0;this.createUI=function(){f=this,g=this.compId,h="ip-"+g,i="ph-"+g,j="fo-"+g;var a=$(window).width(),b='<div id="'+h+'" style="width:'+a+'px" >'+c()+'</div><div id="'+i+'" ></div><div id="'+j+'" ></div>';return b},this.postLoad=function(){d(),k&&(e(),k=!1)}},App.ItemsDialogs=function(){function a(a){var b=new FormData;return a.tileTitle&&b.append("title",a.tileTitle),a.tileSTitle&&b.append("stitle",a.tileSTitle),a.tileInfo&&b.append("info",a.tileInfo),a.tileLName&&b.append("lname",a.tileLName),a.tileLink&&b.append("link",a.tileLink),a.listId&&b.append("listId",a.listId),a.id&&b.append("id",a.id),a.tileImage&&("string"==typeof a.tileImage?b.append("mediaUrl",a.tileImage):b.append("image",a.tileImage)),b}function b(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?(g(a,d,!1),!1):(c.tileTitle=App.util.safeHtml(c.tileTitle),c.tileSTitle=App.util.safeHtml(c.tileSTitle),c.tileInfo=App.util.safeHtml(c.tileInfo),c.tileLName=App.util.safeHtml(c.tileLName),c.tileLink=App.util.safeHtml(c.tileLink),!0)}function c(a,b){j=b,currentDlg=SA.getCompByIdOrName(j),currentDlg&&currentDlg.showDialog(!0,a,"appBanner")}function d(a){var b=jQuery.parseJSON(a);if("OK"==b.status){var c={};c.cmd="addTile",c.data=b,SA.events.fireEvent("ltoolBar",c),currentDlg.showDialog(!1,"List Tile","appBanner")}else g("listMsg",b.message,!1);currentDlg.setWaiting(!1)}function e(a){var b=jQuery.parseJSON(a);if("OK"==b.status){var c={};c.cmd="delTile",b.respData.listId=k,c.data=b,SA.events.fireEvent("ltoolBar",c),currentDlg.showDialog(!1,"List Tile","appBanner")}else g("listMsg",b.message,!1);currentDlg.setWaiting(!1)}function f(a,b,c){var d="";return d+=SA.listCreateUI(this.compId,b,c,!0)}function g(a,b,c){var d=SA.comps.getCompByName(a);d.showMessage(b,c),c||h()}function h(){for(var a=currentDlg.compId,b=$("#"+a),c=25,d=0;4>d;d++)$(b).animate({"margin-left":"+="+(c=-c)+"px"},50)}this.css={items:[]};var i,j,k,l={items:[{name:"newitem-dlg",lc:"App.Dialog",config:{pageStyle:!0},items:[{name:"newitem-form",lc:"App.FormHandler",config:{title:"List Tile",listener:this},items:[{name:"id",ac:"App.Variable"},{name:"listId",ac:"App.Variable"},{name:"tileMsg",ac:"App.Message"},{html:"div",style:"height:5px;"},{name:"tileTitle",ac:"App.TextField",info:"Title (required)",required:!0,pattern:"text"},{name:"tileSTitle",ac:"App.TextField",info:"Subtitle",required:!1,pattern:"text"},{name:"tileImage",ac:"App.UploadBrowser",info:"Photo name",required:!1,pattern:"text"},{name:"tileInfo",ac:"App.TextArea",info:"More information",required:!1,pattern:"text"},{name:"tileLName",ac:"App.TextField",info:"Link name as appears on page",required:!1,pattern:"text"},{name:"tileLink",ac:"App.TextField",info:"Link actual URL",required:!1,pattern:"text"},{html:"div",style:"height:10px;"},{cmd:"cmdSaveTile",ac:"App.Button",label:"Save Changes",config:{theme:"color",defButton:!0}},{cmd:"cmdCancelTile",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:8px;"},{name:"tileDelete",cmd:"showDelTile",ac:"App.Button",label:"Click to Delete Tile",config:{type:"link"}},{html:"div",style:"height:10px;"}]}]},{name:"confirm-delete-item",lc:"App.Dialog",items:[{name:"delitem-form",lc:"App.FormHandler",config:{title:"Are you sure?",listener:this},items:[{html:"div",style:"height:6px;"},{name:"id",ac:"App.Variable"},{name:"delMessage",html:"p",style:"font-size:110%",value:"Are you sure you want to delete?"},{html:"div",style:"height:6px;"},{cmd:"cmdDelTile",ac:"App.Button",label:"Delete",config:{theme:"color"}},{cmd:"cmdDelCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}}]}]}]};this.createUI=function(a,b){var c=f(i,l,b);return c},this.showDialog=function(a,b){c(b,a)},this.notifySubmit=function(f,g,h){if("cmdSaveTile"==f.cmd){if(b("tileMsg",g,h)){currentDlg.setWaiting(!0);var i=a(h);h.id?SA.server.putForm("/rs/ttitem",i,d):SA.server.postForm("/rs/ttitem",i,d)}}else if("cmdCancelTile"==f.cmd)currentDlg.showDialog(!1,"List Tile","appBanner");else if("showDelTile"==f.cmd){currentDlg.showDialog(!1,"","appBanner");var i=SA.comps.getCompByIdOrName("delitem-form");i.updateForm({delMessage:'Delete Tile "'+h.tileTitle+'" ?',id:h.id}),k=h.listId,c("","confirm-delete-item")}else"cmdDelTile"==f.cmd?(currentDlg.setWaiting(!0),SA.server.del("/rs/ttitem",{id:h.id},e)):"cmdDelCancel"==f.cmd&&currentDlg.showDialog(!1,"List Tile","appBanner")},this.getItemsToolBar=function(a,b,c){var d={name:"newitem-edit",items:[]},e=b.config.listId,f=b.config.id;d.items.push(1==c?{name:"item-new-"+a,cmd:"new",ac:"App.Button",label:"Add Tile",config:{theme:"blank",listId:e,cardId:f}}:{name:"item-edit-"+a,cmd:"edit",ac:"App.Button",label:"Edit",config:{type:"link",listId:e,cardId:f}});var g=SA.listCreateUI(this.compId,d,null,!0),h=SA.comps.getCompByIdOrName("item-edit-"+a);h&&h.setActionListener(this);var i=SA.comps.getCompByIdOrName("item-new-"+a);return i&&i.setActionListener(this),g},this.performAction=function(a,b){var d=SA.lookupComponent("ltoolBar"),e=SA.lookupComponent("newitem-form");if("edit"==b.cmd){var f=d.findCard(b.config.listId,b.config.cardId),g={};g.id=f.id,g.listId=f.listId,g.tileTitle=f.title,title=f.title,g.tileSTitle=f.stitle,f.mediaId?g.tileImage=SA.server.getMediaUrl(f.mediaId):f.mediaUrl&&(g.tileImage=f.mediaUrl),g.tileInfo=f.info,g.tileLName=f.lname,g.tileLink=f.link,e.updateForm(g),e.showElement("tileDelete",!0),c(g.tileTitle,"newitem-dlg"),d.show(!1)}else{var h={};h.listId=b.config.listId,e.updateForm(h),e.showElement("tileDelete",!1),c("New Tile","newitem-dlg"),d.show(!1)}},this.postLoad=function(){}},App.LToolBar=function(){function a(a,b){var c,d;if(w&&w.id==a){for(d=0;d<w.items.length;d++)if(w.items[d].id==b)return w.items[d];return void 0}if(n)for(c=0;c<n.length;c++){var e=n[c];if(a==e.id||a==e.fId)for(d=0;d<e.items.length;d++)if(e.items[d].id==b)return e.items[d]}}function b(a){if(w&&w.id==a)return w;if(n&&n.length>0)for(i=0;i<n.length;i++)if(n[i].id==a)return n[i]}function c(){var a={};if(location.search){var b=location.search.indexOf("id=");b>=0?a.id=location.search.substring(b+3):(b=location.search.indexOf("reset="),b>=0&&(a.reset=location.search.substring(b+6)))}return a}function d(a){var b;if(n&&n.length>0)for(i=0;i<n.length;i++)if(n[i].id==a){b=i;break}b&&n.splice(b,1)}function e(a,b){if(b)n.push(a);else for(i=0;i<n.length;i++)n[i].id==a.id&&(a.items=n[i].items,n[i]=a)}function f(a){var b,c=jQuery.parseJSON(a);if(c.shareList&&(b=c.shareList.respData,g(b)),"ERROR"==c.status)SA.deleteUserAuth(),SA.fireEvent("appBanner",{cmd:"postLogin"}),SA.fireEvent("home",{cmd:"showAll",data:n,share:b});else if("OK"==c.status){for(n=c.respData,0==n.length&&$("#listNew").css("color","orange"),i=0;i<n.length;i++){var d=n[i];h(d.id,d.fId)}SA.fireEvent("home",{cmd:"showAll",data:n,share:b})}}function g(a){var b=a.list;if(b.nshare=!0,b.items)for(i=0;i<b.items.length;i++)b.items[i].nshare=!0}function h(a,b){var c={id:a};b&&(c.fId=b),SA.server.get("/rs/ttlist",c,j)}function j(a){var b=jQuery.parseJSON(a);if("ERROR"==b.status)SA.deleteUserAuth(),SA.fireEvent("appBanner",{cmd:"postLogin"});else if("OK"==b.status||"WARNING"==b.status){var c=b.respData;"NOT_FOUND"==b.error&&(c.title="Shared list not found! ");var d;for(d=0;d<n.length;d++){if(c.id==n[d].id){n[d]=c;break}if(c.id==n[d].fId){n[d].shared=!0,n[d]=c;break}}SA.fireEvent("home",{cmd:"refreshList",data:c,source:"lsr"})}}function k(a,b){if(a.listId){var c;for(c=0;c<n.length;c++){var d=n[c];if(d.id==a.listId){d.items||(d.items=new Array);var e;for(e=0;e<d.items.length;e++)if(d.items[e].id==a.id)return b?d.items.splice(e,1):d.items[e]=a,d;return d.items.push(a),d}}}}function l(a,b,c){var d="";return SA.getUserAuth()?(1==v&&(0==o?(b.items[0].config.hidden=!0,b.items[1].config.hidden=!1,b.items[2].config.hidden=!0):1==o?(b.items[0].config.hidden=!1,b.items[1].config.hidden=!0,b.items[2].config.hidden=!0):(b.items[0].config.hidden=!0,b.items[1].config.hidden=!0,b.items[2].config.hidden=!1),d=SA.listCreateUI(a,b,{},!1)),c&&$("#menu-"+q).html(d)):$("#menu-"+q).html(""),d}function m(a){var b=a.timeStamp-x>1;return x=a.timeStamp,b}var n,o=0,p={items:[{name:"lists-home-menu",config:{hidden:!1},items:[{name:"listEdit",ac:"App.Button",label:"Edit List",config:{type:"link"},style:"float:right;padding-top:4px;padding-left:18px;"},{name:"listShare",ac:"App.Button",label:"Share",config:{type:"link"},style:"float:right;padding-top:4px;padding-left:12px;font-color:black"}]},{name:"lists-menu",config:{hidden:!0},items:[{name:"listNew",ac:"App.Button",label:"Create New List",info:"Create a new Top Ten List",style:"float:right;padding-top:4px;padding-left:10px;",config:{type:"link"}},{name:"listReload",ac:"App.Button",label:"Reload",info:"Reload all lists",style:"float:right;padding-top:4px;padding-right:12px;",config:{type:"link"}}]},{name:"lists-tile-menu",config:{hidden:!0},items:[{name:"tileEdit",ac:"App.Button",label:"Edit Tile",info:"Edit Tile Details",style:"float:right;padding-top:4px;padding-left:8px;",config:{type:"link"}}]},{html:"div",style:"float:left;padding-top:10px;padding-left:3px;"}]},q=void 0,r=void 0,s=!0,t=void 0,u=void 0,v=!0;this.createUI=function(){s&&(this.handleEvent({cmd:"loadAllDB"}),s=!1),q=this.compId,r=this;var a="menu-"+q,b=l(q,p,!1),c='<div id="'+q+'" class="container" style="font-size:90%;padding-left:8px;padding-bottom:4px;background-color:rgba(232,232,232,0.9);"><div class="row" ><div id="'+a+'" class="col-md-8 col-md-offset-2" >'+b+"</div></div></div>";return c},this.renderView=function(a){o=a,this.refresh()},this.refresh=function(){l(q,p,!0)},this.show=function(a){a?$("#"+q).fadeIn():$("#"+q).hide()},this.isVisible=function(){return $("#"+q).is(":visible")},this.setEditMode=function(a){void 0!=a&&(v=a)},this.setSelectedListId=function(a){t=a,u=void 0},this.setSelectedTileId=function(a){u=a},this.getCurrentList=function(){return b(t)},this.getCurrentTile=function(){return u?a(t,u):void 0},this.findCard=function(b,c){return a(b,c)},this.getListById=function(a){return b(a)};var w=void 0;this.setNewSharedList=function(a){a?(a.shared=!0,w=a):w=void 0},this.getNewSharedList=function(){return w},this.handleEvent=function(a){if("login"==a.cmd){{l(q,p,!0)}SA.getUserAuth()?r.handleEvent({cmd:"loadAllDB"}):SA.fireEvent("home",{cmd:"showAll"})}else if("addList"==a.cmd){var g=a.data.respData,i=SA.lookupComponent("home");e(g,!0),i.addNewList(g),l(q,p,!0)}else if("delList"==a.cmd){var g=a.data.respData,j=b(t);d(j.id);var i=SA.lookupComponent("home");i.deleteList(g),l(q,p,!0)}else if("reloadList"==a.cmd){var g=a.data.respData;e(g,!1),SA.fireEvent("home",{cmd:"refreshList",data:g})}else if("addTile"==a.cmd){var m=a.data.respData,n=k(m,!1);SA.fireEvent("home",{cmd:"refreshList",data:n,tileId:m.id});var o=SA.lookupComponent("listsManager");o.notifyChanged(m.listId,m.id);var s=SA.lookupComponent("appBanner");s.resetContent(m.id,o.getItemHtml(this,m))}else if("delTile"==a.cmd){var m=a.data.respData,n=k(m,!0);SA.fireEvent("home",{cmd:"refreshList",data:n,tileId:m.id})}else if("loadAllDB"==a.cmd){App.util.startWorking();var u=c();u.id?SA.server.get("/rs/ttlist",{fId:u.id},f):SA.server.get("/rs/ttlist",{},f)}else if("loadListDB"==a.cmd)h(a.listId);else if("checkResetUrl"==a.cmd){var u=c();u.reset&&(SA.deleteUserAuth(),SA.fireEvent("feedbackDialogs",{cmd:"passwordReset",data:u.reset}))}},this.setTitle=function(a){var b=$("#tb-title"),c=SA.localCss(this,"tb-title");b.addClass(r,c),b.html(a)},this.refreshListData=function(a){k(a,!1)},this.getAllListsArray=function(){return n},this.postLoad=function(){this.id;$("#listNew").click(function(a){if(m(a)){var b=SA.getCompByIdOrName("listDialogs"),c={};c.config={title:"Create New List"},c.listStyle="asc",b.showDialog("newlist-dlg",c),b.showElement("newlist-dlg","listDelete",!1)}}),$("#listReload").click(function(a){m(a)&&r.handleEvent({cmd:"loadAllDB"})}),$("#listShare").click(function(a){if(m(a)){var c=b(t),d=SA.getCompByIdOrName("shareDialogs");d.showDialog(c.id,c.title)}}),$("#listEdit").click(function(a){if(m(a)){var c=b(t),d={};d.config={title:"Edit List"},d.id=c.id,d.listTitle=c.title,d.listDesc=c.description,d.listStyle=c.style;var e=SA.getCompByIdOrName("listDialogs");e.showElement("newlist-dlg","listDelete",!0),e.showDialog("newlist-dlg",d)}}),$("#tileEdit").click(function(a){if(m(a)){var b=SA.lookupComponent("itemsDialogs");b.performAction(-1,{cmd:"edit",config:{listId:t,cardId:u}})}})};var x=0},App.LinkFrame=function(){var a;this.createUI=function(b,c){var d="",e=c.srcUrl;return e||(e=""),a=this.compId,d+='<iframe style="width:100%; height:700px; border:0px;margin-top:-10px;" src="'+e+'" id="'+a+'"></iframe>'},this.postLoad=function(){}},App.ListDialogs=function(){function a(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?(g(a,d,!1),!1):!0}function b(a,b){j=a,currentDlg=SA.getCompByIdOrName(j),currentDlg&&(b&&currentDlg.updateForm(b),currentDlg.showDialog(!0))}function c(a){var b=jQuery.parseJSON(a);if("OK"==b.status){SA.events.fireEvent("ltoolBar",{cmd:"delList",data:b}),currentDlg.showDialog(!1);var c=SA.lookupComponent("appBanner");c.showPrevious()}else g("listMsg",b.message,!1)}function d(a){var b=jQuery.parseJSON(a);"OK"==b.status?(SA.events.fireEvent("ltoolBar",{cmd:"addList",data:b}),currentDlg.showDialog(!1)):g("listMsg",b.message,!1)}function e(a){var b=jQuery.parseJSON(a);"OK"==b.status?(SA.events.fireEvent("ltoolBar",{cmd:"reloadList",data:b}),currentDlg.showDialog(!1)):g("listMsg",b.message,!1)}function f(a,b,c){var d=SA.listCreateUI(a,b,c,!0);return d}function g(a,b,c){var d=SA.comps.getCompByName(a);d.showMessage(b,c),c||h()}function h(){for(var a=currentDlg.compId,b=$("#"+a),c=25,d=0;4>d;d++)$(b).animate({"margin-left":"+="+(c=-c)+"px"},50)}this.css={items:[]},this.flow={items:[{name:"newlist-dlg",lc:"App.Dialog",items:[{name:"newlist-form",lc:"App.FormHandler",config:{title:"Top Ten List",listener:this},items:[{name:"listMsg",ac:"App.Message"},{name:"id",ac:"App.Variable"},{html:"div",style:"height:12px;"},{name:"listTitle",ac:"App.TextField",info:"List Title",required:!0,pattern:"text"},{name:"listDesc",ac:"App.TextArea",info:"List Description (optional)",required:!1,pattern:"text"},{html:"div",style:"height:6px;"},{cmd:"cmdCreateList",ac:"App.Button",label:"Save Changes",config:{theme:"color",defButton:!0}},{cmd:"cmdCancelList",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:6px;"},{name:"listDelete",cmd:"showDelList",ac:"App.Button",label:"Click to Delete List",config:{type:"link"}},{html:"div",style:"height:10px;"}]}]},{name:"confirm-delete-list",lc:"App.Dialog",items:[{name:"dellist-form",lc:"App.FormHandler",config:{title:"Are you sure?",listener:this},items:[{html:"div",style:"height:6px;"},{name:"id",ac:"App.Variable"},{name:"delMessage",html:"p",style:"font-size:110%",value:"Are you sure you want to delete?"},{html:"div",style:"height:6px;"},{cmd:"cmdDelList",ac:"App.Button",label:"Delete",config:{theme:"color"}},{cmd:"cmdDelListCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:16px;"}]}]}]};var i=void 0,j=void 0;this.createUI=function(a,b){i=this.compId;var c=f(i,this.flow,b);return c},this.showDialog=function(a,c){b(a,c)},this.showElement=function(a,b,c){var d=SA.lookupComponent(a);d&&d.showElement(b,c)},this.notifySubmit=function(f,g,h){if("cmdCreateList"==f.cmd){if(a("listMsg",g,h)){var i={};i.id=h.id,i.title=App.util.safeHtml(h.listTitle),i.description=App.util.safeHtml(h.listDesc),i.style=h.listStyle,i.id&&i.id>0?SA.server.set("/rs/ttlist",i,e):SA.server.set("/rs/ttlist",i,d)}}else if("cmdCancelList"==f.cmd)currentDlg.showDialog(!1);else if("cmdDelListCancel"==f.cmd)currentDlg.showDialog(!1);else if("cmdCancelShare"==f.cmd)currentDlg.showDialog(!1);else if("showDelList"==f.cmd){currentDlg.showDialog(!1,"","appBanner");var j=SA.getCompByIdOrName("ltoolBar"),k=j.getCurrentList();if(k){var l={delMessage:'Delete entire list "'+k.title+'" ?',id:k.id};b("confirm-delete-list",l)}}else"cmdDelList"==f.cmd&&(currentDlg.setWaiting(!0),SA.server.del("/rs/ttlist",{id:h.id},c))},this.deleteSharedList=function(a){var c={delMessage:"Delete shared list ?",id:a};b("confirm-delete-list",c)},this.postLoad=function(){}},App.ListsManager=function(){function a(a,c,d,e){var f={lc:"App.CardPanel",user:c.user,config:{title:c.title,desc:c.description,id:c.id,editMode:d,addTile:e,maxComm:c.maxComm},items:[]};if(c.items)for(i=0;i<c.items.length;i++){var g=c.items[i],h=b(a,g,!1,!1);f.items.push(h)}return f}function b(a,b,c,d){var e=void 0;b.mediaId&&(e=SA.server.getMediaUrl(b.mediaId));var f={lc:"App.Card",config:{id:b.id,listId:b.listId,ttitle:b.title,stitle:b.stitle,imageUrl:e,mediaUrl:b.mediaUrl,info:b.info,lname:b.lname,link:b.link,editMode:d,zoomMode:c,listener:a,nshare:b.nshare,maxComm:b.maxComm,timeMs:b.timeMs}};if(1==c){var g={lc:"App.CardPanel",config:{editMode:d,addTile:!1,height:"1000px"},items:[]};return g.items.push(f),g}return f}var c={},d=2e4;this.getListHtml=function(b,e,f,g){var h=c[e.id];if(!h){void 0==f&&(f=!0),void 0==g&&(g=void 0==e.fId,1==e.nshare&&(g=!1));var i=a(b,e,f,g);h=SA.createUI(d,i),c[e.id]=h}return h},this.getItemHtml=function(a,e){var f=c[e.id];if(!f){var g=b(a,e,!0,!0);f=SA.createUI(d,g),c[e.id]=f}return f},this.notifyChanged=function(a,b){a&&void 0!=c[a]&&delete c[a],b&&void 0!=c[b]&&delete c[b]}},App.ListsPage_1=function(){function a(a,b,d,e){var f='<div id="'+a+'" class="'+n+'">',g=c(a,b,d),h=html=p.getListHtml(b,e,!1,!1);return f+g+h+"</div>"}function b(a,b,c){var d='<div id="'+a+'" class="'+c+'">',e=SA.createUI(a,v);return d+e+"</div>"}function c(a,b,c){var d={name:"topTB",lc:"App.TopTB",config:{selIdx:c,listener:b}},e=SA.createUI(a,d);return e}function d(a,b,c){var d,f=e(b),g='<div id="'+a+'" class="'+n+'">',h="";for(i=0;i<f.length;i++)d=SA.createUI(a,f[i]),h+=d;var j=g+h+"</div>";return c?j:void $("#"+l).html(j)}function e(a){o=0;var b=f(a,"My Lists",!1);o=b.items.length;var c=f(a,"Friends' Lists",!0);if(!w&&a.shareList){var d=k(a.shareList,!0);if(d){var e={items:[d]};w=f(e,"",!0),w.items&&0!=w.items.length||(w=void 0)}}return w&&c.items.splice(0,0,w.items[0],w.items[1]),c.items&&c.items.length>0?[c,b]:[b]}function f(a,b,c){var d={lc:"App.CardPanel",config:{title:b,desc:"",id:-1,editMode:!1},items:[{lc:"App.Card",config:{id:-1,listId:100,ttitle:" ",stitle:"No lists found!",info:" "}}]};a.items.length>0&&(d.items=[]);var e=SA.getUserAuth();for(j=0;j<a.items.length;j++){var f=a.items[j],h=g(e,f.userId,f.fUserId);if(!(1==c&&1==h||0==c&&0==h)){var i=App.util.pickListCover(f),k="",l="";i.mediaUrl&&(l=" (view list here) "),f.description&&(k=f.description),k+=l;var n={lc:"App.Card",config:{id:-1,listId:f.id,ttitle:f.title,stitle:k,imageUrl:i.imageUrl,mediaUrl:i.mediaUrl,info:"",listener:m},shared:f.shared,user:f.user,maxComm:f.maxComm};if(1==f.nshare){var o={name:"nshare-tb",lc:"App.TopTB",config:{listener:m,tileMode:!0}};d.items.push(o)}d.items.push(n)}}return d}function g(a,b,c){return c?!1:b?a.respData.email==b:!0}function h(a){var b=jQuery.parseJSON(a);if("OK"==b.status){var c=t.getNewSharedList(),d=b.respData;d.title=c.title,d.description=c.description,d.items=c.items,w=void 0,t.setNewSharedList(void 0),SA.fireEvent("ltoolBar",{cmd:"addList",data:b})}}function k(a){if(!a.items)return void 0;var b=App.util.pickListCover(a),c={lc:"App.Card",id:a.id,title:a.title,description:a.description,mediaId:b.mediaId,mediaUrl:b.mediaUrl,info:"",listener:m,user:a.user,userId:a.userId,nshare:a.nshare};return c}this.stateful=!0;var l,m,n,o,p,q,r,s,t,u,v=void 0,w=void 0;this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".my-gallery",value:"margin-left:0px;margin-right:0px;"}]},{name:"@media (max-width: 480px)",items:[{name:".my-gallery",value:"margin-left:0px;margin-right:0px;"}]}]},this.createUI=function(c){l=this.compId,m=this,p=SA.createComponent("listsManager","App.ListsManager"),t=SA.lookupComponent("ltoolBar"),u=SA.lookupComponent("appBanner"),n=SA.localCss(this,"my-gallery");var e="";return 1!=c.config.introMode?(v=c.demoList,t.show(!0),c.shareList&&t.setNewSharedList(c.shareList),e+=d(l,c,!0)):(v=c.items[0],t.show(!1),c.shareList?e=a(l,m,0,c.shareList):(u.showAbout(!1),e=b(l,m,n))),e},this.demoPageHtml=function(){return b(l,m,n)},this.actionPerformed=function(a){if(a.cmd)if("showIntro"==a.cmd)u.showNextPage("About Us","About-us",demoHtml);else if("shareAdd"==a.cmd){var b={},c=t.getNewSharedList();b.fId=c.id,b.fUserId=c.userId,b.title="Please wait..",SA.server.set("/rs/ttlist",b,h)}else"shareRem"==a.cmd&&(w=void 0,t.setNewSharedList(void 0),SA.fireEvent("home",{cmd:"refresh",clearShare:!0}));else{var d=a.config;if(d.listId&&d.id>0){if(s!=d.id){var e=t.findCard(d.listId,d.id);if(e){t.setSelectedTileId(d.id),r=e;var f=p.getItemHtml(m,e);u.showNextPage(e.title,d.id,f)}}}else{var g=t.getListById(d.listId);if(g){t.setSelectedListId(d.listId),q=g;var f=p.getListHtml(m,g);u.showNextPage(g.title,d.listId,f,1==g.shared||void 0!=g.fId)}}}},this.addList=function(){var a=SA.lookupComponent("ltoolBar"),b=a.getAllListsArray(),c={items:b};d(l,c,!1),o=b.length},this.delList=function(){var a=SA.lookupComponent("ltoolBar"),b=a.getAllListsArray(),c={items:b};d(l,c,!1),o=b.length},this.resetPage=function(a,b){var c=SA.lookupComponent("ltoolBar"),e=c.getAllListsArray(),f={items:e};d(l,f,!1);var g=SA.lookupComponent("listsManager");g.notifyChanged(a.id,b),u.resetContent(a.id,g.getListHtml(this,a))},this.nextPage=function(){$("#"+l).carousel("next")},this.prevPage=function(){$("#"+l).carousel("prev")},this.showPage=function(a){(0>a||a>=o)&&(a=o-1)},this.setListener=function(a){listener=a},this.postLoad=function(){}},App.Loading=function(){function a(){var a=$(window).width(),c=$(window).height(),d=50,e=c/2-d/2-20,f=80,g=a/2-f/2+20,h=f/3,i="display:none;border-radius:10%;position:fixed;top:"+e+"px;left:"+g+"px;z-index:1000;width:"+f+"px;height:"+d+"px",j='<div id="'+b+'" style="'+i+'" ><img src="app/res/img/loading.gif" width="'+h+'" /></div>';return j}this.css={items:[{name:"@media (min-width: 481px)",items:[]},{name:"@media (max-width: 480px)",items:[]}]};var b=void 0;this.createUI=function(){b="load-"+this.compId;var c=a(),d=$("#page-etc");return d.length||(d=$('<div id="page-etc" />').appendTo("body"),d.append(c)),""},this.start=function(){var a=$("#"+b);a.show()},this.stop=function(){var a=$("#"+b);a.hide()}},App.LoginComp=function(){function a(){var a=SA.getUserAuth();return a&&"OK"==a.status?!0:!1}var b="Sign In";this.createUI=function(c){var d=SA.getConfigValue(c,"label",b);return a()?"Sign out":d}},App.Message=function(){this.css={items:[{name:".errmsg",value:"padding:0px;font-weight:normal;color:#FF9900;font-size:120%;"},{name:".okmsg",value:"padding:0px;font-weight:normal;color:#00CC00;font-size:120%;"}]};
var a=void 0,b=void 0,c=void 0;this.createUI=function(d){return c=d.name,a=SA.localCss(this,"errmsg"),b=SA.localCss(this,"okmsg"),'<div class="'+a+'" id="'+c+'" ></div>'},this.showMessage=function(d,e){var f=$("#"+c);e?($(f).removeClass(a),$(f).addClass(b),$(f).html(d)):($(f).removeClass(b),$(f).addClass(a),$(f).html(d))}},App.PageFlipper=function(){function a(a){return'<img src="'+a+'" width="100%" />'}function b(a,b,c){var d=$(window).width();if(!e(d))return c&&b.html(""),b.hide(),void a.fadeIn("slow");var f=d+"px";b.css("width",d+"px"),a.show(),b.animate({left:f},"fast",function(){c&&b.html("")})}function c(a,b){var c=a?a.width():$(window).width(),d=a?a.position().left:0;if(!e(c))return a.hide(),b.fadeIn("slow"),void(document.location.href="#top");var f=10*h;b.css({"z-index":f}),b.css("position","fixed"),b.css("overflow-y","scroll"),b.css("-webkit-overflow-scrolling","touch"),b.css("padding-top",top+"px"),b.css("height","100%");var g=c;b.css("left",g+"px"),b.css("width",c+"px"),b.show(),a&&a.hide(),b.animate({left:d+"px"},"fast",function(){})}function d(){for(i=0;i<k.length;i++)$("#"+k[i].name).hide()}function e(){return!0}this.css={items:[{name:"@media (min-width: 481px)",items:[{name:"fcls",value:"width:500px;height:400px;background-color:#f9f9f9;"}]},{name:"@media (max-width: 480px)",items:[{name:"fcls",value:"width:100%;height:400px;background-color:#f9f9f9;"}]}]};var f,g,h=0,h=0,j=0,k=new Array;this.createUI=function(b){f=this.compId,g=this;var c;if(b.config&&b.config.pages&&(c=b.config.pages),c){for(i=0;i<c.length;i++){var d="pf-"+i+"-",e={name:d+f,id:i,title:c[i].title,html:a(c[i].img)};k.push(e)}j=c.length}var h=SA.localCss(this,"fcls"),l='<div id="'+f+'" class="'+h+'" >';for(i=0;j>i;i++)l+='<div id="'+k[i].name+'" style="display:none" ></div>';return l+="</div>",SA.fireEvent(f,{cmd:"refresh"}),l},this.handleEvent=function(a){"refresh"==a.cmd&&g.showNext()},this.showNext=function(){h>=j&&(h=0),g.showNextPage(k[h].id,k[h].title,k[h].html)},this.showPrevious=function(){if(1==h)return void(h=j);lastDataId=0,h--;var a=$("#"+k[h-1].name),c=$("#"+k[h].name),d=!0;b(a,c,d)},this.showNextPage=function(a,b,e){if(0==h){d();var f=$("#"+k[0].name);return f.html(e),f.fadeIn("fast"),void h++}lastDataId=a,k[h].title=b,k[h].dataId=a;var g=$("#"+k[h-1].name),i=$("#"+k[h].name);i.hide(),i.html(e),c(g,i),h++},this.postLoad=function(){function a(a){var c=a.timeStamp>b;return b=a.timeStamp,c}console.debug("post load"),$("#"+f).on("swipeleft",function(b){a(b)&&g.showNext()}),$("#"+f).on("swiperight",function(b){a(b)&&g.showPrevious()}),$("#"+f).on("tap",function(b){!a(b)});var b=0}},App.ShareComp=function(){function a(){var a='<div id="'+e+'" >'+b(g,"icon_mail.jpg","Email","mailto:?subject=Check%20out%20how%20ridiculously%20responsive%20these%20social%20buttons%20are&amp;body=http%3A%2F%2Fkurtnoble.com%2Flabs%2Frrssb%2Findex.html")+b(f,"icon_fb.jpg","Facebook","http://www.facebook.com")+b(h,"icon_twitter.jpg","Twitter","http://www.google.com")+"</div>";return a}function b(a,b,e,f){i[a]=f;var g='<div id="'+a+'" class="'+d+'" ><img class="'+c+'" src="res/img/'+b+'" /><div style="font-size:90%;text-align:center;padding:3px;">'+e+"</div></div>";return g}this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".im-style",value:"width:65px;"},{name:".im-div",value:"float:left;padding-right:20px;"}]},{name:"@media (max-width: 480px)",items:[{name:".im-style",value:"width:50px;"},{name:".im-div",value:"float:left;padding-right:15px;"}]}]};var c,d,e,f,g,h,i={};this.createUI=function(b){return b.value?(c=SA.localCss(this,"im-style"),d=SA.localCss(this,"im-div"),e=this.compId,f="fb-"+e,g="mail-"+e,h="tw-"+e,html=a(b.value)):void 0},this.postLoad=function(){$("#"+f).on("tap",function(){console.debug("fb click: "+i[f]),App.util.openUrlInWindow(i[f])}),$("#"+h).on("tap",function(){console.debug("tw click: "+i[h]),App.util.openUrlInWindow(i[h])}),$("#"+g).on("tap",function(){console.debug("mail click: "+i[g]),App.util.openUrlInWindow(i[g])})}},App.ShareDialogs=function(){function a(a,b){d=a,currentDlg=SA.lookupComponent(d),currentDlg&&(b&&currentDlg.updateForm(b),currentDlg.showDialog(!0))}function b(a,b){var c='I am sharing "Share 10" list name: "'+b+'" \nTo access click link: '+SA.server.getMyHostName()+"/?id="+a;return c}this.css={items:[]};var c,d,e={items:[{name:"sharelist-dlg",lc:"App.Dialog",items:[{name:"sharelist-form",lc:"App.FormHandler",config:{title:"Share Your List",listener:this},items:[{html:"div",style:"height:8px;"},{html:"p",style:"font-size:110%",value:"Copy message below and paste into a Text Message or Email and send it to your friends!"},{name:"shareHtml",ac:"App.TextArea",info:"",required:!0,pattern:"text",config:{rows:5,style:"background-color:#F0F0F0"}},{html:"div",style:"height:12px;"},{cmd:"cmdCancelShare",ac:"App.Button",label:"Done",config:{theme:"clear"}},{html:"div",style:"height:10px;"}]}]}]};this.createUI=function(a,b){c=this.compId;var d=SA.listCreateUI(c,e,b,!0);return d},this.showDialog=function(c,d){if(App.util.isMobileApp()){var e="Sharing list: "+d,f='I am sharing "Share 10" list name: "'+d+'" with you!. Click link below:\n',g=SA.server.getMyHostName()+"/?id="+c;window.plugins.socialsharing.share(f,e,null,g)}else{var h={shareHtml:b(c,d)};a("sharelist-dlg",h)}},this.notifySubmit=function(a){"cmdCancelShare"==a.cmd&&currentDlg.showDialog(!1)},this.postLoad=function(){}},App.TextArea=function(){this.stateful=!0,this.actionListener=void 0,this.atomObj=void 0;var a="";this.css={},this.createUI=function(b){this.atomObj=b;var c=this.compId,d=SA.getConfig(b,"rows",3),e=(SA.getConfig(b,"cols",-1),SA.getConfig(b,"style","")),f="";if(b.info){var g="";f=' placeholder="'+b.info+g+'"'}var h="";b.label&&(h='<label class="col-md-3 control-label" for="email">'+b.label+"</label>"),a=b.value;var i="";a&&""!=a?i=a:a="";var j='<div class="form-group" >'+h+'<div class="col-md-12"><textarea style="font-size:110%;'+e+'" class="form-control" rows="'+d+'" id="'+c+'" '+f+" >"+a+"</textarea></div></div>";return j},this.getValue=function(){return a=$("#"+this.compId).val()},this.getName=function(){return this.atomObj.name}},App.TextField=function(){this.stateful=!0,this.actionListener=void 0,this.atomObj=void 0;var a="";this.css={},this.createUI=function(b){this.atomObj=b;var c=this.compId,d="",e=SA.getConfigValue(b,"type","text"),f='type="'+e+'"',g="";if(b.info){var h="";d='placeholder="'+b.info+h+'"'}b.label&&(g='<label class="col-md-3 control-label" for="email">'+b.label+"</label>"),a=b.value;var i="";a&&""!=a&&(i='value="'+a+'" ');var j='<div class="form-group">'+g+'<div class="col-md-12"><input '+f+' style="font-size:110%;" class="form-control" id="'+c+'" '+i+d+" /></div></div>";return j},this.getValue=function(){return a=$("#"+this.compId).val()},this.getName=function(){return this.atomObj.name}},App.TopTB=function(){function a(){var a={html:"span",items:[{name:"shareRem",ac:"App.Button",label:"No",style:"margin-left:10px;font-size:80%;background-color:#E6EBF0;",config:{theme:"blank",listener:d}},{name:"shareAdd",ac:"App.Button",label:"Yes",style:"margin-left:6px;font-size:80%;background-color:#E6EBF0;",config:{theme:"blank",listener:d}}]},c=SA.createUI(b,a);return c}this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".title1",value:"float:left;font-size:120%;width:100%;text-align:left;background-color:#FFF5E6;"}]},{name:"@media (max-width: 480px)",items:[{name:".title1",value:"float:left;font-size:100%;width:100%;text-align:left;background-color:#FFF5E6;"}]}]};var b=void 0,c=void 0,d=void 0;this.createUI=function(e){b=this.compId,d=this;var f=SA.localCss(this,"title1");c=SA.getConfig(e,"listener");var g=SA.getConfig(e,"tileMode"),h="";if(1==g){var i="Follow this list?";h='<div id="'+b+'" ><div><div style="" ><div id="left-'+b+'" class="'+f+'"><div style="padding:5px;background-color:#E6EBF0">'+i+a()+"</div></div></div></div></div>"}else{var i='<b>Welcome to "Share 10" . .</b> Your friend is sharing this list with you! &nbsp;&nbsp;Please "Sign In" to follow it.';h='<div id="'+b+'" class="container" style="margin-top:0px" ><div class="row" ><div class="col-md-8 col-md-offset-2" style="padding-left:6px" ><div id="left-'+b+'" class="'+f+'"><div style="padding:3px">'+i+"</div></div></div></div></div>"}return h},this.performAction=function(a){c&&c.actionPerformed&&c.actionPerformed({cmd:a})},this.selectTab=function(){},this.postLoad=function(){}},App.UploadBrowser=function(){function a(a){return a.indexOf("youtu")>0}function b(a){var b=SA.lookupComponent(a);return b&&b.showDialog(!0,"","appBanner"),b}function c(){var a=SA.lookupComponent("youtube-dlg");a.showDialog(!1,"","appBanner")}function d(a,b,c){var d=SA.validate.evalObj(b,c);return""!=d?!1:!0}function e(a){var b="";b=a?'<img class="img-responsive" src="'+a+'">':'<img class="img-responsive" src="'+k+'">',f(b)}function f(a){$("#preview-div").html(a)}this.stateful=!0;var g=void 0,h=void 0,i=void 0,j=void 0,k="app/res/img/your-picture.png";this.flow={items:[{name:"youtube-dlg",lc:"App.Dialog",items:[{name:"youtube-form",lc:"App.FormHandler",config:{title:"Embed YouTube Video",listener:this},items:[{html:"p",style:"font-size:100%",value:"YouTube video URL (copy and paste video link here)"},{name:"youtubeUrl",ac:"App.TextField",info:"YouTue video URL",required:!0,pattern:"text"},{html:"div",style:"height:6px;"},{cmd:"cmdUTubeUrl",ac:"App.Button",label:"OK",config:{theme:"color"}},{cmd:"cmdUTubeCancel",ac:"App.Button",label:"Cancel",config:{theme:"blank"}},{html:"div",style:"height:6px;"}]}]}]},this.css={items:[{name:"@media (min-width: 481px)",items:[{name:".card",value:"margin-bottom:3px; border: 1px solid #dddddd;padding:0px;background-color:#f9f8f7"}]},{name:"@media (max-width: 480px)",items:[{name:".card",value:"margin-bottom:1px; border: 1px solid #dddddd;padding:0px;background-color:#f9f8f7"}]}]},this.createUI=function(b){j=this.compId,g=b,SA.listCreateUI(j,this.flow);var c="",d="";g.info&&(c='placeholder="'+g.info+'"'),g.label&&(d='<label class="col-md-3 control-label" for="email">'+g.label+"</label>"),g.value&&g.value.length>0?(k=g.value,g.value=void 0,imgFle=void 0):k="app/res/img/your-picture.jpg";var e={name:"set-photo-"+j,ac:"App.Button",style:"font-size:90%;margin-right:5px;",label:"Set photo",config:{theme:"blank"}},f={name:"set-utube-"+j,ac:"App.Button",style:"font-size:90%;margin-right:5px;",label:"YouTube",config:{theme:"blank"}},h=SA.listCreateUI(j,e,null,!0);h=SA.injectClass(h,"needsclick");var i=SA.listCreateUI(j,f,null,!0);i=SA.injectClass(i,"needsclick");var l=SA.localCss(this,"card"),m="";m=a(k)?App.util.getYouTubeHtml(k):'<img  class="img-responsive" src="'+k+'">';var n='<div id="'+j+'" class="form-group">'+d+'<div class="col-md-12"><div id="preview-div" class="'+l+'">'+m+"</div><div>"+h+'<input type="file" id="file-'+j+'" style="display:none" />'+i+"</div></div></div>";return n},this.getValue=function(){return i?i:h},this.getName=function(){return g.name},this.notifySubmit=function(a,b,e){if("cmdUTubeUrl"==a.cmd&&d("commMsg",b,e)){i=e.youtubeUrl;var g=App.util.getYouTubeHtml(i);f(g)}c()},this.postLoad=function(){var a=$("#set-photo-"+j),c=$("#file-"+j),d=$("#set-utube-"+j);a.click(function(){i=void 0,c.trigger("click")}),d.click(function(){b("youtube-dlg")}),c.change(function(a){return a.preventDefault(),h=this.files[0],reader=new FileReader,reader.onload=function(a){e(a.target.result)},reader.readAsDataURL(h),!1})}},App.Variable=function(){var a=void 0;this.createUI=function(b){return a=b,""},this.getName=function(){return a.name},this.getValue=function(){return a.value},this.setValue=function(b){a.value=b}};